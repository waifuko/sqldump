Host:
```
Edition	Windows Server 2022 Datacenter
Version	21H2
Installed on	‎28.‎11.‎2025
OS build	20348.4405
```

SQL Server:
```
Microsoft SQL Server 2025 (RTM) - 17.0.1000.7 (X64) 
	Oct 21 2025 12:05:57 
	Copyright (C) 2025 Microsoft Corporation
	Standard Developer Edition (64-bit) on Windows Server 2022 Datacenter 10.0 <X64> (Build 20348: ) (Hypervisor)
```




22:37:41:644	[2025-11-28T22:37:41.6441130+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Information
22:37:41:720	[2025-11-28T22:37:41.7197169+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Information 

	                                   Elapsed time:73,745 ms 

	                                   Query: 
	                                             create table #SVer(ID int,  Name  sysname, Internal_Value int, Value nvarchar(512))
	                                             insert #SVer exec master.dbo.xp_msver
	                                             insert #SVer select t.*
	                                             from sys.dm_os_host_info
	                                             CROSS APPLY (
	                                             VALUES
	                                             (1001, 'host_platform', 0, host_platform),
	                                             (1002, 'host_distribution', 0, host_distribution),
	                                             (1003, 'host_release', 0, host_release),
	                                             (1004, 'host_service_pack_level', 0, host_service_pack_level),
	                                             (1005, 'host_sku', host_sku, ''),
	                                             (1006, 'HardwareGeneration', '', ''),
	                                             (1007, 'ServiceTier', '', ''),
	                                             (1008, 'ReservedStorageSizeMB', '0', '0'),
	                                             (1009, 'UsedStorageSizeMB', '0', '0')
	                                             ) t(id, [name], internal_value, [value])
	                                             -- Managed Instance-specific properties
	                                             if (SERVERPROPERTY('EngineEdition') = 8)
	                                             begin
	                                               DECLARE @gen4memoryPerCoreMB float = 7168.0
	                                               DECLARE @gen5memoryPerCoreMB float = 5223.0
	                                               DECLARE @physicalMemory float
	                                               DECLARE @virtual_core_count int
	                                               DECLARE @reservedStorageSize bigint
	                                               DECLARE @usedStorageSize decimal(18,2)
	                                               DECLARE @hwGeneration nvarchar(128)
	                                               DECLARE @serviceTier nvarchar(128)
	                                               SET @physicalMemory = (SELECT TOP 1 [virtual_core_count] *
	                                                 (
	                                                   CASE WHEN [hardware_generation] = 'Gen4' THEN @gen4memoryPerCoreMB
	                                                   WHEN [hardware_generation] = 'Gen5' THEN @gen5memoryPerCoreMB
	                                                   ELSE 0 END
	                                                  )
	                                                  FROM master.sys.server_resource_stats 
	                                                  ORDER BY start_time DESC)
	                                         
	                                               IF (@physicalMemory <> 0) 
	                                               BEGIN
	                                                 UPDATE #SVer SET [Internal_Value] =  @physicalMemory WHERE Name = N'PhysicalMemory'
	                                                 UPDATE #SVer SET [Value] = CONCAT( @physicalMemory, ' (',  @physicalMemory * 1024, ')') WHERE Name = N'PhysicalMemory'
	                                               END
	                                               UPDATE #SVer SET [Internal_Value] = (SELECT TOP 1 [virtual_core_count] FROM master.sys.server_resource_stats ORDER BY start_time desc) WHERE Name = N'ProcessorCount'
	                                               UPDATE #SVer SET [Value] = [Internal_Value] WHERE Name = N'ProcessorCount'
	                                               SELECT TOP 1
	                                                 @hwGeneration = [hardware_generation],
	                                                 @serviceTier =[sku],
	                                                 @virtual_core_count = [virtual_core_count],
	                                                 @reservedStorageSize = [reserved_storage_mb],
	                                                 @usedStorageSize = [storage_space_used_mb]
	                                               FROM master.sys.server_resource_stats
	                                               ORDER BY [start_time] DESC
	                                               UPDATE #SVer SET [Value] = @hwGeneration WHERE Name = N'HardwareGeneration'
	                                               UPDATE #SVer SET [Value] = @serviceTier WHERE Name = N'ServiceTier'
	                                               UPDATE #SVer SET [Value] = @reservedStorageSize WHERE Name = N'ReservedStorageSizeMB'
	                                               UPDATE #SVer SET [Value] = @usedStorageSize WHERE Name = N'UsedStorageSizeMB'
	                                             end
	                                         
	                                   SELECT
	                                   CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname) AS [Server_Name],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' AS [Server_Urn],
	                                   CAST(null AS int) AS [Server_ServerType],
	                                   CAST(0x0001 AS int) AS [Server_Status],
	                                   0 AS [Server_IsContainedAuthentication],
	                                   (@@microsoftversion / 0x1000000) & 0xff AS [VersionMajor],
	                                   (@@microsoftversion / 0x10000) & 0xff AS [VersionMinor],
	                                   @@microsoftversion & 0xffff AS [BuildNumber],
	                                   CAST(SERVERPROPERTY('IsSingleUser') AS bit) AS [IsSingleUser],
	                                   CAST(SERVERPROPERTY(N'Edition') AS sysname) AS [Edition],
	                                   CAST(SERVERPROPERTY('EngineEdition') AS int) AS [EngineEdition],
	                                   CAST(ISNULL(SERVERPROPERTY(N'IsXTPSupported'), 0) AS bit) AS [IsXTPSupported],
	                                   SERVERPROPERTY(N'ProductVersion') AS [VersionString],
	                                   ( select Value from #SVer where Name =N'host_platform') AS [HostPlatform],
	                                   CAST(FULLTEXTSERVICEPROPERTY('IsFullTextInstalled') AS bit) AS [IsFullTextInstalled]
	                                   ORDER BY
	                                   [Server_Name] ASC
	                                           drop table #SVer
	                                         
	
	[2025-11-28T22:37:45.3830056+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/JobServer
	[2025-11-28T22:37:45.4048353+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/JobServer 

	                                   Elapsed time:20,9011 ms 

	                                   Query: SELECT
	                                   CAST(serverproperty(N'Servername') AS sysname) AS [Name],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/JobServer' AS [Urn]
	                                   ORDER BY
	                                   [Name] ASC
	
	[2025-11-28T22:37:47.3950352+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@IsSystemObject = 0 and @IsDatabaseSnapshot = 0]/Option
	[2025-11-28T22:37:47.8647906+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@IsSystemObject = 0 and @IsDatabaseSnapshot = 0]/Option 

	                                   Elapsed time:467,8809 ms 

	                                   Query: 
	                                           declare @HasViewPermission int
	                                           select @HasViewPermission = HAS_PERMS_BY_NAME(null, null, 'VIEW SERVER STATE')
	                                         
	                                           create table #tmp_db_ars (replica_id uniqueidentifier, group_id uniqueidentifier, replica_server_name sysname)
	                                           create table #tmp_db_ags (group_id uniqueidentifier, name sysname)
	                                         
	                                           create table #tmp_db_hadr_dbrs (group_database_id uniqueidentifier, synchronization_state tinyint, is_local bit, group_id uniqueidentifier, database_id int)
	                                         
	                                           create table #tmp_sync_states (database_id int, sync_state tinyint)
	                                         
	                                           if (@HasViewPermission = 1)
	                                           begin
	                                           insert into #tmp_db_ars select replica_id, group_id, replica_server_name  from  master.sys.availability_replicas
	                                           insert into #tmp_db_ags select group_id, name from master.sys.availability_groups
	                                           end
	                                         
	                                           if (@HasViewPermission = 1)
	                                           begin
	                                           insert into #tmp_db_hadr_dbrs select group_database_id, synchronization_state, is_local, group_id, database_id from master.sys.dm_hadr_database_replica_states
	                                           end
	                                         
	                                           if (@HasViewPermission = 1)
	                                           begin
	                                           if serverproperty('EngineEdition') = 8
	                                           begin
	                                           insert into #tmp_sync_states
	                                           select dtb.database_id, hadrd.synchronization_state as synchronization_state
	                                           from sys.databases AS dtb
	                                           join #tmp_db_hadr_dbrs AS hadrd ON hadrd.database_id = dtb.database_id AND hadrd.is_local = 1
	                                           join #tmp_db_ags AS avag ON hadrd.group_id = avag.group_id
	                                           join #tmp_db_ars AS avar ON avag.name = avar.replica_server_name
	                                           join #tmp_db_ags AS avag2 ON avar.group_id = avag2.group_id
	                                           where hadrd.database_id = dtb.database_id
	                                           end
	                                           else
	                                           begin
	                                           insert into #tmp_sync_states
	                                           select dtb.database_id, hadrd.synchronization_state
	                                           from sys.databases AS dtb
	                                           join #tmp_db_hadr_dbrs AS hadrd ON hadrd.database_id = dtb.database_id AND hadrd.is_local = 1
	                                           end
	                                           end
	                                         
	                                   SELECT
	                                   dtb.name AS [Database_Name],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(dtb.name,'''') + ']' AS [Database_Urn],
	                                   dtb.containment AS [Database_ContainmentType],
	                                   dtb.recovery_model AS [Database_RecoveryModel],
	                                   ISNULL(suser_sname(dtb.owner_sid),'') AS [Database_Owner],
	                                           case
	                                           when dtb.collation_name is null then 0x200
	                                           else 0
	                                           end |
	                                           case
	                                           when 1 = dtb.is_in_standby then 0x40
	                                           else 0
	                                           end |
	                                           case dtb.state
	                                           when 1 then 0x2
	                                           when 2 then 0x8
	                                           when 3 then 0x4
	                                           when 4 then 0x10
	                                           when 5 then 0x100
	                                           when 6 then 0x20
	                                           else 1
	                                           end
	                                          AS [Database_Status],
	                                   dtb.compatibility_level AS [Database_CompatibilityLevel],
	                                   ISNULL(dmi.mirroring_role,0) AS [Database_MirroringRole],
	                                   ISNULL(dmi.mirroring_state + 1, 0) AS [Database_MirroringStatus],
	                                   sync_state.sync_state AS [Database_AvailabilityDatabaseSynchronizationState],
	                                   0 AS [Database_HasMemoryOptimizedObjects],
	                                   CAST(0 AS bit) AS [Database_RemoteDataArchiveEnabled],
	                                   CAST(
	                                           case
	                                           when SERVERPROPERTY('EngineEdition') = 6 then cast(1 as bit)
	                                           else cast(0 as bit)
	                                           end
	                                          AS bit) AS [Database_IsSqlDw],
	                                   case when SERVERPROPERTY('EngineEdition') = 8 then SERVERPROPERTY('IsFullTextInstalled') else dtb.is_fulltext_enabled end AS [Database_IsFullTextEnabled],
	                                   CAST(ISNULL(dtb.is_ledger_on, 0) AS bit) AS [Database_IsLedger],
	                                   dtb.recovery_model AS [RecoveryModel],
	                                   dtb.user_access AS [UserAccess],
	                                   dtb.is_read_only AS [ReadOnly],
	                                   dtb.name AS [Database_DatabaseName2],
	                                   dtb.name AS [Database_DatabaseName3]
	                                   FROM
	                                   master.sys.databases AS dtb
	                                   LEFT OUTER JOIN sys.database_mirroring AS dmi ON dmi.database_id = dtb.database_id
	                                   LEFT OUTER JOIN #tmp_sync_states AS sync_state ON dtb.database_id = sync_state.database_id
	                                   WHERE
	                                   (CAST(case when dtb.name in ('master','model','msdb','tempdb') then 1 else dtb.is_distributor end AS bit)=0 and CAST(isnull(dtb.source_database_id, 0) AS bit)=0)
	                                   ORDER BY
	                                   [Database_Name] ASC
	                                           drop table #tmp_db_ars
	                                           drop table #tmp_db_ags        
	                                         
	                                           drop table #tmp_db_hadr_dbrs
	                                         
	                                           drop table #tmp_sync_states
	                                         
	
	[2025-11-28T22:37:49.5675271+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@IsSystemObject = 1]/Option
	[2025-11-28T22:37:49.5901151+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@IsSystemObject = 1]/Option 

	                                   Elapsed time:21,2398 ms 

	                                   Query: 
	                                   SELECT
	                                   dtb.name AS [Database_Name],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(dtb.name,'''') + ']' AS [Database_Urn],
	                                           case
	                                           when dtb.collation_name is null then 0x200
	                                           else 0
	                                           end |
	                                           case
	                                           when 1 = dtb.is_in_standby then 0x40
	                                           else 0
	                                           end |
	                                           case dtb.state
	                                           when 1 then 0x2
	                                           when 2 then 0x8
	                                           when 3 then 0x4
	                                           when 4 then 0x10
	                                           when 5 then 0x100
	                                           when 6 then 0x20
	                                           else 1
	                                           end
	                                          AS [Database_Status],
	                                   dtb.compatibility_level AS [Database_CompatibilityLevel],
	                                   CAST(
	                                           case
	                                           when SERVERPROPERTY('EngineEdition') = 6 then cast(1 as bit)
	                                           else cast(0 as bit)
	                                           end
	                                          AS bit) AS [Database_IsSqlDw],
	                                   case when SERVERPROPERTY('EngineEdition') = 8 then SERVERPROPERTY('IsFullTextInstalled') else dtb.is_fulltext_enabled end AS [Database_IsFullTextEnabled],
	                                   dtb.recovery_model AS [RecoveryModel],
	                                   dtb.user_access AS [UserAccess],
	                                   dtb.is_read_only AS [ReadOnly],
	                                   dtb.name AS [Database_DatabaseName2]
	                                   FROM
	                                   master.sys.databases AS dtb
	                                   WHERE
	                                   (CAST(case when dtb.name in ('master','model','msdb','tempdb') then 1 else dtb.is_distributor end AS bit)=1)
	                                   ORDER BY
	                                   [Database_Name] ASC
	
	[2025-11-28T22:37:52.3635780+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='model']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 0 and @TemporalType = 0 and @IsExternal = 0 and @IsNode = 0 and @IsEdge = 0 and @LedgerType = 0]
	[2025-11-28T22:37:52.4918130+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='model']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 0 and @TemporalType = 0 and @IsExternal = 0 and @IsNode = 0 and @IsEdge = 0 and @LedgerType = 0] 

	                                   Elapsed time:126,8249 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   CAST(CASE idx.type WHEN 5 THEN 1 ELSE 0 END AS bit) AS [HasClusteredColumnStoreIndex],
	                                   CAST(0 AS bit) AS [RemoteDataArchiveEnabled],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(ISNULL(tbl.ledger_type, 0) AS int) AS [LedgerType],
	                                   CAST(CASE WHEN 'PS'=dsidx.type THEN 1 ELSE 0 END AS bit) AS [IsPartitioned],
	                                   CAST(
	                                           ISNULL((SELECT distinct 1 from sys.all_columns
	                                           WHERE object_id = tbl.object_id
	                                           AND is_sparse = 1), 0)
	                                          AS bit) AS [HasSparseColumn],
	                                   CAST(tbl.is_node AS bit) AS [IsNode],
	                                   CAST(tbl.is_edge AS bit) AS [IsEdge],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   LEFT OUTER JOIN sys.data_spaces AS dsidx ON dsidx.data_space_id = idx.data_space_id
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and tbl.is_filetable=0 and CAST(tbl.is_memory_optimized AS bit)=0 and tbl.temporal_type=0 and CAST(tbl.is_external AS bit)=0 and CAST(tbl.is_node AS bit)=0 and CAST(tbl.is_edge AS bit)=0 and CAST(ISNULL(tbl.ledger_type, 0) AS int)=0)
	
	[2025-11-28T22:37:52.5494904+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='model']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 0 and @TemporalType = 2 and @IsExternal = 0 and @LedgerType = 0]
	[2025-11-28T22:37:52.6517846+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='model']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 0 and @TemporalType = 2 and @IsExternal = 0 and @LedgerType = 0] 

	                                   Elapsed time:101,0486 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   CAST(CASE idx.type WHEN 5 THEN 1 ELSE 0 END AS bit) AS [HasClusteredColumnStoreIndex],
	                                   CAST(ISNULL(historyTable.object_id, 0) AS int) AS [HistoryTableID],
	                                   CAST(ISNULL(historyTable.name, N'') AS sysname) AS [HistoryTableName],
	                                   CAST(ISNULL(SCHEMA_NAME(historyTable.schema_id), N'') AS sysname) AS [HistoryTableSchema],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(CASE WHEN 'PS'=dsidx.type THEN 1 ELSE 0 END AS bit) AS [IsPartitioned],
	                                   CAST(
	                                           ISNULL((SELECT distinct 1 from sys.all_columns
	                                           WHERE object_id = tbl.object_id
	                                           AND is_sparse = 1), 0)
	                                          AS bit) AS [HasSparseColumn],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   LEFT OUTER JOIN sys.tables as historyTable ON historyTable.object_id = tbl.history_table_id
	                                   LEFT OUTER JOIN sys.data_spaces AS dsidx ON dsidx.data_space_id = idx.data_space_id
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and tbl.is_filetable=0 and CAST(tbl.is_memory_optimized AS bit)=0 and tbl.temporal_type=2 and CAST(tbl.is_external AS bit)=0 and CAST(ISNULL(tbl.ledger_type, 0) AS int)=0)
	
	[2025-11-28T22:37:52.6949884+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='model']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 1 and @TemporalType = 2 and @IsExternal = 0]
	[2025-11-28T22:37:52.7349357+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='model']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 1 and @TemporalType = 2 and @IsExternal = 0] 

	                                   Elapsed time:38,9257 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   case when (tbl.durability=1) then 0 else 1 end AS [Durability],
	                                   CAST(ISNULL(historyTable.object_id, 0) AS int) AS [HistoryTableID],
	                                   CAST(ISNULL(historyTable.name, N'') AS sysname) AS [HistoryTableName],
	                                   CAST(ISNULL(SCHEMA_NAME(historyTable.schema_id), N'') AS sysname) AS [HistoryTableSchema],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(0 AS bit) AS [RemoteDataArchiveEnabled],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   LEFT OUTER JOIN sys.tables as historyTable ON historyTable.object_id = tbl.history_table_id
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and tbl.is_filetable=0 and CAST(tbl.is_memory_optimized AS bit)=1 and tbl.temporal_type=2 and CAST(tbl.is_external AS bit)=0)
	
	[2025-11-28T22:37:52.7783220+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='model']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 1 and @TemporalType = 0 and @IsExternal = 0]
	[2025-11-28T22:37:52.8197803+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='model']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 1 and @TemporalType = 0 and @IsExternal = 0] 

	                                   Elapsed time:40,4005 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   case when (tbl.durability=1) then 0 else 1 end AS [Durability],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(0 AS bit) AS [RemoteDataArchiveEnabled],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and tbl.is_filetable=0 and CAST(tbl.is_memory_optimized AS bit)=1 and tbl.temporal_type=0 and CAST(tbl.is_external AS bit)=0)
	
	[2025-11-28T22:37:52.8597807+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='model']/Table[@IsSystemObject = 0 and @LedgerType = 2 and @IsDroppedLedgerTable = 0]
	[2025-11-28T22:37:52.9563766+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='model']/Table[@IsSystemObject = 0 and @LedgerType = 2 and @IsDroppedLedgerTable = 0] 

	                                   Elapsed time:94,5651 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   CAST(CASE idx.type WHEN 5 THEN 1 ELSE 0 END AS bit) AS [HasClusteredColumnStoreIndex],
	                                   CAST(ISNULL(historyTable.object_id, 0) AS int) AS [HistoryTableID],
	                                   CAST(ISNULL(historyTable.name, N'') AS sysname) AS [HistoryTableName],
	                                   CAST(ISNULL(SCHEMA_NAME(historyTable.schema_id), N'') AS sysname) AS [HistoryTableSchema],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(ISNULL(tbl.ledger_type, 0) AS int) AS [LedgerType],
	                                   CAST(ISNULL(tbl.is_dropped_ledger_table, 0) AS bit) AS [IsDroppedLedgerTable],
	                                   CAST(CASE WHEN 'PS'=dsidx.type THEN 1 ELSE 0 END AS bit) AS [IsPartitioned],
	                                   CAST(
	                                           ISNULL((SELECT distinct 1 from sys.all_columns
	                                           WHERE object_id = tbl.object_id
	                                           AND is_sparse = 1), 0)
	                                          AS bit) AS [HasSparseColumn],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   LEFT OUTER JOIN sys.tables as historyTable ON historyTable.object_id = tbl.history_table_id
	                                   LEFT OUTER JOIN sys.data_spaces AS dsidx ON dsidx.data_space_id = idx.data_space_id
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and CAST(ISNULL(tbl.ledger_type, 0) AS int)=2 and CAST(ISNULL(tbl.is_dropped_ledger_table, 0) AS bit)=0)
	
	[2025-11-28T22:37:53.0145231+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='model']/Table[@IsSystemObject = 0 and @LedgerType = 3 and @IsDroppedLedgerTable = 0]
	[2025-11-28T22:37:53.1237139+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='model']/Table[@IsSystemObject = 0 and @LedgerType = 3 and @IsDroppedLedgerTable = 0] 

	                                   Elapsed time:108,1747 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   CAST(CASE idx.type WHEN 5 THEN 1 ELSE 0 END AS bit) AS [HasClusteredColumnStoreIndex],
	                                   CAST(ISNULL(tbl.ledger_type, 0) AS int) AS [LedgerType],
	                                   CAST(ISNULL(tbl.is_dropped_ledger_table, 0) AS bit) AS [IsDroppedLedgerTable],
	                                   CAST(CASE WHEN 'PS'=dsidx.type THEN 1 ELSE 0 END AS bit) AS [IsPartitioned],
	                                   CAST(
	                                           ISNULL((SELECT distinct 1 from sys.all_columns
	                                           WHERE object_id = tbl.object_id
	                                           AND is_sparse = 1), 0)
	                                          AS bit) AS [HasSparseColumn],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   LEFT OUTER JOIN sys.data_spaces AS dsidx ON dsidx.data_space_id = idx.data_space_id
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and CAST(ISNULL(tbl.ledger_type, 0) AS int)=3 and CAST(ISNULL(tbl.is_dropped_ledger_table, 0) AS bit)=0)
	
	[2025-11-28T22:37:56.2310515+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='master']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 0 and @TemporalType = 0 and @IsExternal = 0 and @IsNode = 0 and @IsEdge = 0 and @LedgerType = 0]
	[2025-11-28T22:37:56.3744107+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='master']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 0 and @TemporalType = 0 and @IsExternal = 0 and @IsNode = 0 and @IsEdge = 0 and @LedgerType = 0] 

	                                   Elapsed time:141,8142 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   CAST(CASE idx.type WHEN 5 THEN 1 ELSE 0 END AS bit) AS [HasClusteredColumnStoreIndex],
	                                   CAST(0 AS bit) AS [RemoteDataArchiveEnabled],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(ISNULL(tbl.ledger_type, 0) AS int) AS [LedgerType],
	                                   CAST(CASE WHEN 'PS'=dsidx.type THEN 1 ELSE 0 END AS bit) AS [IsPartitioned],
	                                   CAST(
	                                           ISNULL((SELECT distinct 1 from sys.all_columns
	                                           WHERE object_id = tbl.object_id
	                                           AND is_sparse = 1), 0)
	                                          AS bit) AS [HasSparseColumn],
	                                   CAST(tbl.is_node AS bit) AS [IsNode],
	                                   CAST(tbl.is_edge AS bit) AS [IsEdge],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   LEFT OUTER JOIN sys.data_spaces AS dsidx ON dsidx.data_space_id = idx.data_space_id
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and tbl.is_filetable=0 and CAST(tbl.is_memory_optimized AS bit)=0 and tbl.temporal_type=0 and CAST(tbl.is_external AS bit)=0 and CAST(tbl.is_node AS bit)=0 and CAST(tbl.is_edge AS bit)=0 and CAST(ISNULL(tbl.ledger_type, 0) AS int)=0)
	
	[2025-11-28T22:37:56.4059645+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='master']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 0 and @TemporalType = 2 and @IsExternal = 0 and @LedgerType = 0]
	[2025-11-28T22:37:56.4783131+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='master']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 0 and @TemporalType = 2 and @IsExternal = 0 and @LedgerType = 0] 

	                                   Elapsed time:69,7725 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   CAST(CASE idx.type WHEN 5 THEN 1 ELSE 0 END AS bit) AS [HasClusteredColumnStoreIndex],
	                                   CAST(ISNULL(historyTable.object_id, 0) AS int) AS [HistoryTableID],
	                                   CAST(ISNULL(historyTable.name, N'') AS sysname) AS [HistoryTableName],
	                                   CAST(ISNULL(SCHEMA_NAME(historyTable.schema_id), N'') AS sysname) AS [HistoryTableSchema],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(CASE WHEN 'PS'=dsidx.type THEN 1 ELSE 0 END AS bit) AS [IsPartitioned],
	                                   CAST(
	                                           ISNULL((SELECT distinct 1 from sys.all_columns
	                                           WHERE object_id = tbl.object_id
	                                           AND is_sparse = 1), 0)
	                                          AS bit) AS [HasSparseColumn],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   LEFT OUTER JOIN sys.tables as historyTable ON historyTable.object_id = tbl.history_table_id
	                                   LEFT OUTER JOIN sys.data_spaces AS dsidx ON dsidx.data_space_id = idx.data_space_id
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and tbl.is_filetable=0 and CAST(tbl.is_memory_optimized AS bit)=0 and tbl.temporal_type=2 and CAST(tbl.is_external AS bit)=0 and CAST(ISNULL(tbl.ledger_type, 0) AS int)=0)
	
	[2025-11-28T22:37:56.5310791+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='master']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 1 and @TemporalType = 2 and @IsExternal = 0]
	[2025-11-28T22:37:56.5549852+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='master']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 1 and @TemporalType = 2 and @IsExternal = 0] 

	                                   Elapsed time:22,5173 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   case when (tbl.durability=1) then 0 else 1 end AS [Durability],
	                                   CAST(ISNULL(historyTable.object_id, 0) AS int) AS [HistoryTableID],
	                                   CAST(ISNULL(historyTable.name, N'') AS sysname) AS [HistoryTableName],
	                                   CAST(ISNULL(SCHEMA_NAME(historyTable.schema_id), N'') AS sysname) AS [HistoryTableSchema],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(0 AS bit) AS [RemoteDataArchiveEnabled],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   LEFT OUTER JOIN sys.tables as historyTable ON historyTable.object_id = tbl.history_table_id
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and tbl.is_filetable=0 and CAST(tbl.is_memory_optimized AS bit)=1 and tbl.temporal_type=2 and CAST(tbl.is_external AS bit)=0)
	
	[2025-11-28T22:37:56.6167565+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='master']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 1 and @TemporalType = 0 and @IsExternal = 0]
	[2025-11-28T22:37:56.6391125+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='master']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 1 and @TemporalType = 0 and @IsExternal = 0] 

	                                   Elapsed time:20,9662 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   case when (tbl.durability=1) then 0 else 1 end AS [Durability],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(0 AS bit) AS [RemoteDataArchiveEnabled],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and tbl.is_filetable=0 and CAST(tbl.is_memory_optimized AS bit)=1 and tbl.temporal_type=0 and CAST(tbl.is_external AS bit)=0)
	
	[2025-11-28T22:37:56.6764124+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='master']/Table[@IsSystemObject = 0 and @LedgerType = 2 and @IsDroppedLedgerTable = 0]
	[2025-11-28T22:37:56.7798463+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='master']/Table[@IsSystemObject = 0 and @LedgerType = 2 and @IsDroppedLedgerTable = 0] 

	                                   Elapsed time:101,7918 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   CAST(CASE idx.type WHEN 5 THEN 1 ELSE 0 END AS bit) AS [HasClusteredColumnStoreIndex],
	                                   CAST(ISNULL(historyTable.object_id, 0) AS int) AS [HistoryTableID],
	                                   CAST(ISNULL(historyTable.name, N'') AS sysname) AS [HistoryTableName],
	                                   CAST(ISNULL(SCHEMA_NAME(historyTable.schema_id), N'') AS sysname) AS [HistoryTableSchema],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(ISNULL(tbl.ledger_type, 0) AS int) AS [LedgerType],
	                                   CAST(ISNULL(tbl.is_dropped_ledger_table, 0) AS bit) AS [IsDroppedLedgerTable],
	                                   CAST(CASE WHEN 'PS'=dsidx.type THEN 1 ELSE 0 END AS bit) AS [IsPartitioned],
	                                   CAST(
	                                           ISNULL((SELECT distinct 1 from sys.all_columns
	                                           WHERE object_id = tbl.object_id
	                                           AND is_sparse = 1), 0)
	                                          AS bit) AS [HasSparseColumn],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   LEFT OUTER JOIN sys.tables as historyTable ON historyTable.object_id = tbl.history_table_id
	                                   LEFT OUTER JOIN sys.data_spaces AS dsidx ON dsidx.data_space_id = idx.data_space_id
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and CAST(ISNULL(tbl.ledger_type, 0) AS int)=2 and CAST(ISNULL(tbl.is_dropped_ledger_table, 0) AS bit)=0)
	
	[2025-11-28T22:37:56.8240658+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='master']/Table[@IsSystemObject = 0 and @LedgerType = 3 and @IsDroppedLedgerTable = 0]
	[2025-11-28T22:37:56.9045521+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='master']/Table[@IsSystemObject = 0 and @LedgerType = 3 and @IsDroppedLedgerTable = 0] 

	                                   Elapsed time:79,1246 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   CAST(CASE idx.type WHEN 5 THEN 1 ELSE 0 END AS bit) AS [HasClusteredColumnStoreIndex],
	                                   CAST(ISNULL(tbl.ledger_type, 0) AS int) AS [LedgerType],
	                                   CAST(ISNULL(tbl.is_dropped_ledger_table, 0) AS bit) AS [IsDroppedLedgerTable],
	                                   CAST(CASE WHEN 'PS'=dsidx.type THEN 1 ELSE 0 END AS bit) AS [IsPartitioned],
	                                   CAST(
	                                           ISNULL((SELECT distinct 1 from sys.all_columns
	                                           WHERE object_id = tbl.object_id
	                                           AND is_sparse = 1), 0)
	                                          AS bit) AS [HasSparseColumn],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   LEFT OUTER JOIN sys.data_spaces AS dsidx ON dsidx.data_space_id = idx.data_space_id
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and CAST(ISNULL(tbl.ledger_type, 0) AS int)=3 and CAST(ISNULL(tbl.is_dropped_ledger_table, 0) AS bit)=0)
	
	[2025-11-28T22:38:03.6494681+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='tempdb']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 0 and @TemporalType = 0 and @IsExternal = 0 and @IsNode = 0 and @IsEdge = 0 and @LedgerType = 0]
	[2025-11-28T22:38:14.3196389+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='tempdb']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 0 and @TemporalType = 0 and @IsExternal = 0 and @IsNode = 0 and @IsEdge = 0 and @LedgerType = 0] 

	                                   Elapsed time:10668,3574 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   CAST(CASE idx.type WHEN 5 THEN 1 ELSE 0 END AS bit) AS [HasClusteredColumnStoreIndex],
	                                   CAST(0 AS bit) AS [RemoteDataArchiveEnabled],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(ISNULL(tbl.ledger_type, 0) AS int) AS [LedgerType],
	                                   CAST(CASE WHEN 'PS'=dsidx.type THEN 1 ELSE 0 END AS bit) AS [IsPartitioned],
	                                   CAST(
	                                           ISNULL((SELECT distinct 1 from sys.all_columns
	                                           WHERE object_id = tbl.object_id
	                                           AND is_sparse = 1), 0)
	                                          AS bit) AS [HasSparseColumn],
	                                   CAST(tbl.is_node AS bit) AS [IsNode],
	                                   CAST(tbl.is_edge AS bit) AS [IsEdge],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   LEFT OUTER JOIN sys.data_spaces AS dsidx ON dsidx.data_space_id = idx.data_space_id
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and tbl.is_filetable=0 and CAST(tbl.is_memory_optimized AS bit)=0 and tbl.temporal_type=0 and CAST(tbl.is_external AS bit)=0 and CAST(tbl.is_node AS bit)=0 and CAST(tbl.is_edge AS bit)=0 and CAST(ISNULL(tbl.ledger_type, 0) AS int)=0)and(tbl.name not like '#%')
	
	[2025-11-28T22:38:14.3703974+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='tempdb']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 0 and @TemporalType = 2 and @IsExternal = 0 and @LedgerType = 0]
	[2025-11-28T22:38:26.9618821+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='tempdb']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 0 and @TemporalType = 2 and @IsExternal = 0 and @LedgerType = 0] 

	                                   Elapsed time:12588,7211 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   CAST(CASE idx.type WHEN 5 THEN 1 ELSE 0 END AS bit) AS [HasClusteredColumnStoreIndex],
	                                   CAST(ISNULL(historyTable.object_id, 0) AS int) AS [HistoryTableID],
	                                   CAST(ISNULL(historyTable.name, N'') AS sysname) AS [HistoryTableName],
	                                   CAST(ISNULL(SCHEMA_NAME(historyTable.schema_id), N'') AS sysname) AS [HistoryTableSchema],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(CASE WHEN 'PS'=dsidx.type THEN 1 ELSE 0 END AS bit) AS [IsPartitioned],
	                                   CAST(
	                                           ISNULL((SELECT distinct 1 from sys.all_columns
	                                           WHERE object_id = tbl.object_id
	                                           AND is_sparse = 1), 0)
	                                          AS bit) AS [HasSparseColumn],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   LEFT OUTER JOIN sys.tables as historyTable ON historyTable.object_id = tbl.history_table_id
	                                   LEFT OUTER JOIN sys.data_spaces AS dsidx ON dsidx.data_space_id = idx.data_space_id
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and tbl.is_filetable=0 and CAST(tbl.is_memory_optimized AS bit)=0 and tbl.temporal_type=2 and CAST(tbl.is_external AS bit)=0 and CAST(ISNULL(tbl.ledger_type, 0) AS int)=0)and(tbl.name not like '#%')
	
	[2025-11-28T22:38:27.0145824+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='tempdb']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 1 and @TemporalType = 2 and @IsExternal = 0]
	[2025-11-28T22:38:36.5877817+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='tempdb']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 1 and @TemporalType = 2 and @IsExternal = 0] 

	                                   Elapsed time:9570,3126 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   case when (tbl.durability=1) then 0 else 1 end AS [Durability],
	                                   CAST(ISNULL(historyTable.object_id, 0) AS int) AS [HistoryTableID],
	                                   CAST(ISNULL(historyTable.name, N'') AS sysname) AS [HistoryTableName],
	                                   CAST(ISNULL(SCHEMA_NAME(historyTable.schema_id), N'') AS sysname) AS [HistoryTableSchema],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(0 AS bit) AS [RemoteDataArchiveEnabled],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   LEFT OUTER JOIN sys.tables as historyTable ON historyTable.object_id = tbl.history_table_id
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and tbl.is_filetable=0 and CAST(tbl.is_memory_optimized AS bit)=1 and tbl.temporal_type=2 and CAST(tbl.is_external AS bit)=0)and(tbl.name not like '#%')
	
	[2025-11-28T22:38:36.6365625+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='tempdb']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 1 and @TemporalType = 0 and @IsExternal = 0]
	[2025-11-28T22:38:44.2674706+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='tempdb']/Table[@IsSystemObject = 0 and @IsFileTable = 0 and @IsMemoryOptimized = 1 and @TemporalType = 0 and @IsExternal = 0] 

	                                   Elapsed time:7629,4418 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   case when (tbl.durability=1) then 0 else 1 end AS [Durability],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(0 AS bit) AS [RemoteDataArchiveEnabled],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and tbl.is_filetable=0 and CAST(tbl.is_memory_optimized AS bit)=1 and tbl.temporal_type=0 and CAST(tbl.is_external AS bit)=0)and(tbl.name not like '#%')
	
	[2025-11-28T22:38:44.3929165+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='tempdb']/Table[@IsSystemObject = 0 and @LedgerType = 2 and @IsDroppedLedgerTable = 0]
	[2025-11-28T22:38:56.3503243+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='tempdb']/Table[@IsSystemObject = 0 and @LedgerType = 2 and @IsDroppedLedgerTable = 0] 

	                                   Elapsed time:11955,9072 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   CAST(CASE idx.type WHEN 5 THEN 1 ELSE 0 END AS bit) AS [HasClusteredColumnStoreIndex],
	                                   CAST(ISNULL(historyTable.object_id, 0) AS int) AS [HistoryTableID],
	                                   CAST(ISNULL(historyTable.name, N'') AS sysname) AS [HistoryTableName],
	                                   CAST(ISNULL(SCHEMA_NAME(historyTable.schema_id), N'') AS sysname) AS [HistoryTableSchema],
	                                   tbl.temporal_type AS [TemporalType],
	                                   CAST(ISNULL(tbl.ledger_type, 0) AS int) AS [LedgerType],
	                                   CAST(ISNULL(tbl.is_dropped_ledger_table, 0) AS bit) AS [IsDroppedLedgerTable],
	                                   CAST(CASE WHEN 'PS'=dsidx.type THEN 1 ELSE 0 END AS bit) AS [IsPartitioned],
	                                   CAST(
	                                           ISNULL((SELECT distinct 1 from sys.all_columns
	                                           WHERE object_id = tbl.object_id
	                                           AND is_sparse = 1), 0)
	                                          AS bit) AS [HasSparseColumn],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   LEFT OUTER JOIN sys.tables as historyTable ON historyTable.object_id = tbl.history_table_id
	                                   LEFT OUTER JOIN sys.data_spaces AS dsidx ON dsidx.data_space_id = idx.data_space_id
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and CAST(ISNULL(tbl.ledger_type, 0) AS int)=2 and CAST(ISNULL(tbl.is_dropped_ledger_table, 0) AS bit)=0)and(tbl.name not like '#%')
	
	[2025-11-28T22:38:56.3972810+03:00 Begin Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='tempdb']/Table[@IsSystemObject = 0 and @LedgerType = 3 and @IsDroppedLedgerTable = 0]
	[2025-11-28T22:39:07.3083065+03:00 End Query] URN:Server[@Name='SEIRAI\CATHARSIS']/Database[@Name='tempdb']/Table[@IsSystemObject = 0 and @LedgerType = 3 and @IsDroppedLedgerTable = 0] 

	                                   Elapsed time:10909,3655 ms 

	                                   Query: SELECT
	                                   tbl.name AS [Name],
	                                   SCHEMA_NAME(tbl.schema_id) AS [Schema],
	                                   'Server[@Name=' + quotename(CAST(
	                                           serverproperty(N'Servername')
	                                          AS sysname),'''') + ']' + '/Database[@Name=' + quotename(db_name(),'''') + ']' + '/Table[@Name=' + quotename(tbl.name,'''') + ' and @Schema=' + quotename(SCHEMA_NAME(tbl.schema_id),'''') + ']' AS [Urn],
	                                   tbl.create_date AS [CreateDate],
	                                   CAST(tbl.is_memory_optimized AS bit) AS [IsMemoryOptimized],
	                                   CAST(CASE idx.type WHEN 5 THEN 1 ELSE 0 END AS bit) AS [HasClusteredColumnStoreIndex],
	                                   CAST(ISNULL(tbl.ledger_type, 0) AS int) AS [LedgerType],
	                                   CAST(ISNULL(tbl.is_dropped_ledger_table, 0) AS bit) AS [IsDroppedLedgerTable],
	                                   CAST(CASE WHEN 'PS'=dsidx.type THEN 1 ELSE 0 END AS bit) AS [IsPartitioned],
	                                   CAST(
	                                           ISNULL((SELECT distinct 1 from sys.all_columns
	                                           WHERE object_id = tbl.object_id
	                                           AND is_sparse = 1), 0)
	                                          AS bit) AS [HasSparseColumn],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type > 1 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredIndex],
	                                   CAST(CASE idx.index_id WHEN 1 THEN 1 ELSE 0 END AS bit) AS [HasClusteredIndex],
	                                   CAST(case idx.index_id when 1 then case when (idx.is_primary_key + 2*idx.is_unique_constraint = 1) then 1 else 0 end else 0 end AS bit) AS [HasPrimaryClusteredIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 3 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasXmlIndex],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name = N'xml'), 0) AS bit) AS [HasXmlData],
	                                   CAST(ISNULL((select top 1 1 from sys.all_columns as clmns join sys.types as usrt on usrt.user_type_id = clmns.user_type_id where clmns.object_id = tbl.object_id and usrt.name in (N'geometry', N'geography')), 0) AS bit) AS [HasSpatialData],
	                                   CAST(ISNULL((select top 1 1 from sys.indexes ind where ind.object_id = tbl.object_id and ind.type = 6 and ind.is_hypothetical = 0 ), 0) AS bit) AS [HasNonClusteredColumnStoreIndex]
	                                   FROM
	                                   sys.tables AS tbl
	                                   INNER JOIN sys.indexes AS idx ON 
	                                           idx.object_id = tbl.object_id and (idx.index_id < 2  or (tbl.is_memory_optimized = 1 and idx.index_id = (select min(index_id) from sys.indexes where object_id = tbl.object_id)))
	                                         
	                                   LEFT OUTER JOIN sys.data_spaces AS dsidx ON dsidx.data_space_id = idx.data_space_id
	                                   WHERE
	                                   (CAST(
	                                    case 
	                                       when tbl.is_ms_shipped = 1 then 1
	                                       when (
	                                           select 
	                                               major_id 
	                                           from 
	                                               sys.extended_properties 
	                                           where 
	                                               major_id = tbl.object_id and 
	                                               minor_id = 0 and 
	                                               class = 1 and 
	                                               name = N'microsoft_database_tools_support') 
	                                           is not null then 1
	                                       else 0
	                                   end          
	                                                AS bit)=0 and CAST(ISNULL(tbl.ledger_type, 0) AS int)=3 and CAST(ISNULL(tbl.is_dropped_ledger_table, 0) AS bit)=0)and(tbl.name not like '#%')
